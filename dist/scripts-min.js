var pokemonRepository = function () { var t = [], a = "https://pokeapi.co/api/v2/pokemon/?limit=150"; function e(a) { t.push(a) } function i() { var t = $(".modal-container"); t.removeClass("is-visible"), t.empty() } return $(window).on("keydown", t => { "Escape" === t.key && i() }), $("body").click(function () { $(".modal-container").is(":visible") && i() }), { add: e, getAll: function () { return t }, addListItem: function (t) { pokemonRepository.loadDetails(t).then(function () { var a = $(".row"), e = $('<div class="card" style="width:400px"></div>'), i = $('<img class="card-img-top" alt="Card image" style="width:20%" />'); i.attr("src", t.imageUrl); var o = $('<div class="card-body"></div>'), n = $("<h4 class='card-title' >" + t.name + "</h4>"), l = $('<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#Modal">See Profile</button>'); a.append(e), e.append(i), e.append(o), o.append(n), o.append(l), l.on("click", function (a) { var e; e = t, pokemonRepository.loadDetails(e).then(function () { console.log(e), function (t) { var a = $(".modal-body"), e = $(".modal-title"); $(".modal-header"), e.empty(), a.empty(); var i = $("<h1>" + t.name + "</h1>"), o = $('<img class="modal-img" style="width:50%">'); o.attr("src", t.imageUrl); var n = $('<img class="modal-img" style="width:50%">'); n.attr("src", t.imageUrlBack); var l = $("<p>height : " + t.height + "</p>"), r = $("<p>types : " + t.types + "</p>"), s = $("<p>abilities : " + t.abilities + "</p>"); e.append(i), a.append(o), a.append(n), a.append(l), a.append(r), a.append(s) }(e) }) }) }) }, loadList: function () { return $.ajax(a).then(function (t) { t.results.forEach(function (t) { var a = { name: t.name, detailsUrl: t.url }; e(a), console.log(a) }) }).catch(function (t) { console.error(t) }) }, loadDetails: function (t) { var a = t.detailsUrl; return $.ajax(a).then(function (a) { t.imageUrl = a.sprites.front_default, t.imageUrlBack = a.sprites.back_default, t.height = a.height, t.types = [], a.types.forEach(function (a) { t.types.push(a.type.name) }), t.abilities = [], a.abilities.forEach(function (a) { t.abilities.push(a.ability.name) }) }).catch(function (t) { console.error(t) }) } } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (t) { pokemonRepository.addListItem(t) }) });